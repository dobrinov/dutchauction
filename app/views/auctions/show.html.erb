<h1><%= @auction.title %></h1>
<p><%= @auction.description %></p>

<ul>
  <li>Auction starts:            <strong><%= @auction.start_datetime %></strong></li>
  <li>Auction status:            <strong><%= @auction.state %></strong></li>
  <li>Store price:               <strong><%= @auction.store_price %> BGN</strong></li>
  <li>Start price:               <strong><%= @auction.start_price %> BGN</strong></li>
  <li>End price:                 <strong><%= @auction.end_price %> BGN</strong></li>
  <li>Current price:             <strong><%= @auction.current_price %> BGN</strong></li>
  <li>Start quantity:            <strong><%= @auction.start_quantity %></strong></li>
  <li>Current quantity:          <strong><%= @auction.current_quantity %></strong></li>
  <li>Minimum users per product: <strong><%= @auction.minimum_users_per_product %></strong></li>
  <li>Maximum users per product: <strong><%= @auction.maximum_users_per_product %></strong></li>
  <li>Time for purchase:         <strong><%= @auction.time_for_purchase %> minutes</strong></li>
</ul>

<ul>
  <li>Registered users:          <strong><%= @auction.users.count %></strong></li>
</ul>

<ul>
  <li>Active users:              <strong>?</strong></li>
  <li>Inactive users:            <strong>?</strong></li>
</ul>

<% if current_user.registered_for?(@auction) %>

  <% if @auction.scheduled? %>
    <%= button_tag 'Waiting for auction start ...', disabled: true %>
  <% elsif @auction.running? %>
    <%= form_for Purchase.new, url: reserve_auction_purchase_path(@auction), method: :put do |f| %>
      <%= f.submit 'Buy' %>
    <% end %>
  <% elsif @auction.paused? %>
    <%= button_tag 'Waiting to resume auction ...', disabled: true %>
  <% elsif @auction.stopped? %>
    <%= button_tag 'Auction was stopped ...', disabled: true %>
  <% elsif @auction.finished? %>
    <%= button_tag 'Auction has finished ...', disabled: true %>
  <% elsif @auction.new? %>
    <%# Do not show anything %>
  <% end %>

<% else %>
  <% if @auction.scheduled? %>
    <%= form_for AuctionParticipation.new, url: auction_auction_participation_path(@auction) do |f| %>
      <%= f.submit 'Register for auction' %>
    <% end %>
  <% end %>
<% end %>